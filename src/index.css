/* ===== tokens base (claro) ===== */
:root {
  --bg: #fff8ee;
  --text: #3e2b24;
  --muted: #7a6a63;
  --border: #e9d6c8;
  --surface-1: #ffffff;
  --surface-2: #fff2e6;
  --overlay: rgba(0,0,0,.45);

  --choco: #5a2c1e;
  --rose: #fddede;
  --cream: #fff7f0;

  --shadow: 0 4px 12px rgba(0,0,0,.06);
  --ring: 0 0 0 3px rgba(90,44,30,.18);

  /* Bootstrap (modo claro) */
  color-scheme: light;
  --bs-body-bg: var(--bg);
  --bs-body-color: var(--text);
  --bs-card-bg: var(--surface-1);
  --bs-card-color: var(--text);
  --bs-border-color: var(--border);
  --bs-heading-color: var(--text);
  --bs-link-color: var(--choco);
  
  /* Transiciones suaves entre temas */
  transition: background-color 0.3s ease, 
              color 0.3s ease;
}

/* ===== dark: aceptamos cualquiera de estos atributos ===== */
:root[data-theme='dark'],
:root[data-bs-theme='dark'],
body[data-theme='dark'] {
  --bg: #161314;
  --text: #f5ebe5;
  --muted: #d4c8c2;
  --border: #3a302b;
  --surface-1: #211b1a;
  --surface-2: #2a2220;
  --overlay: rgba(0,0,0,.55);

  --choco: #f0c5ab;
  --rose: #4a2f2c;
  --cream: #1f1918;

  --shadow: 0 6px 18px rgba(0,0,0,.4);
  --ring: 0 0 0 3px rgba(240,197,171,.35);

  /* Bootstrap (modo oscuro) - Mejorado para mejor contraste */
  color-scheme: dark;
  --bs-body-bg: var(--bg);
  --bs-body-color: var(--text);
  --bs-card-bg: var(--surface-1);
  --bs-card-color: var(--text);
  --bs-border-color: var(--border);
  --bs-heading-color: var(--text);
  --bs-link-color: var(--choco);
}

/* ===== base ===== */
html, body, #root { height: 100%; }
body {
  background-color: var(--bg) !important;
  color: var(--text) !important;
  font-family: 'Lato', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Transición suave de colores */
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Transiciones suaves para todos los elementos */
* { 
  transition: background-color 0.3s ease, 
              color 0.3s ease, 
              border-color 0.3s ease,
              box-shadow 0.2s ease,
              transform 0.2s ease;
}

/* Respeto a usuarios que prefieren menos movimiento */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* tipografía marca */
.brand-font { font-family: 'Pacifico', cursive; }
.text-choco { color: var(--choco) !important; }

/* superficies */
.navbar, .card, .form-control, .btn, .accordion-item {
  border-radius: .75rem !important;
  box-shadow: var(--shadow);
  background-color: var(--surface-1) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
}

/* Medios fluidos por si se insertan imágenes o videos */
img, video {
  max-width: 100%;
  height: auto;
}

/* header de sección / hero */
.bg-rose-subtle, .section-header {
  background: linear-gradient(180deg, var(--rose), var(--cream)) !important;
  border: 1px solid var(--border) !important;
  box-shadow: var(--shadow) !important;
}
:root[data-theme='dark'] .bg-rose-subtle,
:root[data-bs-theme='dark'] .bg-rose-subtle,
body[data-theme='dark'] .bg-rose-subtle,
:root[data-theme='dark'] .section-header,
:root[data-bs-theme='dark'] .section-header,
body[data-theme='dark'] .section-header {
  background: linear-gradient(180deg, #2b2321, #1c1716) !important;
}

/* contraste de títulos/subtítulos en headers */
:root { --section-title: var(--choco); --section-subtitle: color-mix(in srgb, var(--text) 70%, white); }
:root[data-theme='dark'],
:root[data-bs-theme='dark'],
body[data-theme='dark'] {
  --section-title: #ffe9d7;
  --section-subtitle: #e3d0c5;
}
.section-header h1,
.section-header .brand-font,
.bg-rose-subtle h1,
.bg-rose-subtle .brand-font { color: var(--section-title) !important; }
.section-header p,
.section-header .text-muted,
.bg-rose-subtle p,
.bg-rose-subtle .text-muted { color: var(--section-subtitle) !important; }

/* navbar */
.pastel-navbar {
  background-color: var(--surface-1) !important;
  border-color: var(--border) !important;
  box-shadow: var(--shadow) !important;
}
.pastel-navbar .navbar-brand { color: var(--section-title) !important; }
.pastel-navbar .nav-link {
  color: color-mix(in srgb, var(--text) 90%, transparent) !important;
  opacity: .95;
}
.pastel-navbar .nav-link:hover,
.pastel-navbar .nav-link:focus { color: var(--section-title) !important; opacity: 1; }
.pastel-navbar .nav-link.active { color: var(--choco) !important; font-weight: 600; }
.pastel-navbar .form-control {
  background-color: var(--surface-1) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}
.pastel-navbar .btn {
  background-color: var(--surface-1) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}
.pastel-navbar .btn:hover {
  background-color: color-mix(in srgb, var(--choco) 16%, var(--surface-1)) !important;
  color: var(--section-title) !important;
}
.navbar-toggler { border-color: var(--border) !important; }
.navbar-toggler:focus { box-shadow: var(--ring) !important; }
:root[data-theme='dark'] .navbar-toggler-icon,
:root[data-bs-theme='dark'] .navbar-toggler-icon,
body[data-theme='dark'] .navbar-toggler-icon { filter: invert(.85); }

/* inputs / botones */
.form-control:focus {
  outline: none;
  box-shadow: var(--ring) !important;
  border-color: color-mix(in srgb, var(--choco) 35%, var(--border)) !important;
}

.btn-choco { 
  background-color: var(--choco) !important; 
  color: #fff !important; 
  border: none !important;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.btn-choco:hover { 
  filter: brightness(.92);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(90, 44, 30, 0.3);
}

.btn-choco:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(90, 44, 30, 0.2);
}

.btn {
  transition: all 0.2s ease;
}

.btn:hover {
  transform: translateY(-1px);
}

/* utilidades */
.text-muted { color: var(--muted) !important; }

/* Ocultar spinner en inputs numéricos (Chrome, Safari, Edge) */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Ocultar spinner en Firefox */
input[type="number"] {
  -moz-appearance: textfield;
  appearance: textfield;
}

/* Input con inputMode="numeric" sin spinner */
input[inputMode="numeric"] {
  -moz-appearance: textfield;
  appearance: textfield;
}

input[inputMode="numeric"]::-webkit-inner-spin-button,
input[inputMode="numeric"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.card-img-top { 
  object-fit: cover; 
  height: 220px;
  transition: transform 0.3s ease, filter 0.3s ease;
}

/* Animaciones interactivas para tarjetas */
.card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  cursor: pointer;
}

.card:hover {
  transform: translateY(-8px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.15);
}

.card:hover .card-img-top {
  transform: scale(1.05);
  filter: brightness(1.1);
}

/* toasts */
.toast { border-radius: .6rem; font-weight: 500; }
.toast.bg-success { background-color: #5a2c1e !important; }
.toast.bg-warning { background-color: #d39e00 !important; }
.toast.bg-danger  { background-color: #c9302c !important; }

/* === Arreglo específico para los cuadros de Misión y Visión === */
:root[data-theme='dark'] .card.bg-light,
:root[data-bs-theme='dark'] .card.bg-light,
body[data-theme='dark'] .card.bg-light {
  background-color: var(--surface-1) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

/* Si usan solo bg-light sin card */
:root[data-theme='dark'] .bg-light,
:root[data-bs-theme='dark'] .bg-light,
body[data-theme='dark'] .bg-light {
  background-color: var(--surface-1) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

/* Refuerza los títulos y párrafos dentro */
:root[data-theme='dark'] .bg-light h5,
:root[data-bs-theme='dark'] .bg-light h5,
body[data-theme='dark'] .bg-light h5 {
  color: var(--section-title) !important;
}

:root[data-theme='dark'] .bg-light p,
:root[data-bs-theme='dark'] .bg-light p,
body[data-theme='dark'] .bg-light p {
  color: var(--text) !important;
}
:root[data-theme='dark'] .bg-light,
:root[data-bs-theme='dark'] .bg-light,
body[data-theme='dark'] .bg-light {
  border: 1px solid rgba(230, 184, 156, 0.35) !important;
}

/* ==== NOSOTROS: forzar "Misión" y "Visión" a oscuro en dark ==== */
:root[data-theme='dark'] .bg-white,
:root[data-bs-theme='dark'] .bg-white,
body[data-theme='dark'] .bg-white,
:root[data-theme='dark'] .bg-light-subtle,
:root[data-bs-theme='dark'] .bg-light-subtle,
body[data-theme='dark'] .bg-light-subtle,
:root[data-theme='dark'] [style*="background"],
:root[data-bs-theme='dark'] [style*="background"],
body[data-theme='dark'] [style*="background"] {
  background-color: var(--surface-1) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
  box-shadow: var(--shadow) !important;
}

/* títulos y párrafos dentro, para asegurar contraste */
:root[data-theme='dark'] .bg-white h5,
:root[data-bs-theme='dark'] .bg-white h5,
body[data-theme='dark'] .bg-white h5,
:root[data-theme='dark'] .bg-light-subtle h5,
:root[data-bs-theme='dark'] .bg-light-subtle h5,
body[data-theme='dark'] .bg-light-subtle h5,
:root[data-theme='dark'] [style*="background"] h5,
:root[data-bs-theme='dark'] [style*="background"] h5,
body[data-theme='dark'] [style*="background"] h5 {
  color: var(--section-title) !important;
}

:root[data-theme='dark'] .bg-white p,
:root[data-bs-theme='dark'] .bg-white p,
body[data-theme='dark'] .bg-white p,
:root[data-theme='dark'] .bg-light-subtle p,
:root[data-bs-theme='dark'] .bg-light-subtle p,
body[data-theme='dark'] .bg-light-subtle p,
:root[data-theme='dark'] [style*="background"] p,
:root[data-bs-theme='dark'] [style*="background"] p,
body[data-theme='dark'] [style*="background"] p {
  color: var(--text) !important;
}

/* ===== Chips legibles en ambas apariencias (claro y oscuro) ===== */
.badge-soft {
  display: inline-block;
  padding: .4rem .65rem;
  border-radius: 999px;
  font-weight: 600;
  background: color-mix(in srgb, var(--choco) 12%, transparent);
  color: var(--choco);
  border: 1px solid color-mix(in srgb, var(--choco) 22%, transparent);
}

.badge.bg-light,
.badge.text-bg-light {
  background: color-mix(in srgb, var(--choco) 12%, transparent) !important;
  color: var(--choco) !important;
  border: 1px solid color-mix(in srgb, var(--choco) 22%, transparent) !important;
}

:root[data-theme='dark'] .badge-soft,
:root[data-bs-theme='dark'] .badge-soft,
body[data-theme='dark'] .badge-soft,
:root[data-theme='dark'] .badge.bg-light,
:root[data-bs-theme='dark'] .badge.bg-light,
body[data-theme='dark'] .badge.bg-light,
:root[data-theme='dark'] .badge.text-bg-light,
:root[data-bs-theme='dark'] .badge.text-bg-light,
body[data-theme='dark'] .badge.text-bg-light {
  background: color-mix(in srgb, var(--choco) 14%, transparent) !important;
  color: var(--choco) !important;
  border-color: color-mix(in srgb, var(--choco) 26%, transparent) !important;
}

/* ===== Mejor contraste de títulos en Hero (modo claro y oscuro) ===== */
.hero-slide h1,
.hero-slide .display-4,
.hero-slide .display-5 {
  color: #ffffff !important;
  text-shadow: 0 3px 12px rgba(0, 0, 0, 0.65);
  font-weight: 700;
}
.hero-slide p,
.hero-slide .lead {
  color: #f5f5f5 !important;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
}
:root[data-theme='dark'] .hero-slide h1,
:root[data-theme='dark'] .hero-slide .display-4,
:root[data-theme='dark'] .hero-slide .display-5 {
  color: #ffe9d7 !important;
  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
}
:root[data-theme='dark'] .hero-slide p,
:root[data-theme='dark'] .hero-slide .lead {
  color: #f2d6c7 !important;
}

/* Utilidades de truncado por si se usan en cards/listas */
.text-truncate-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.text-truncate-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
/* Botón contorno con color de marca */
.btn-outline-choco {
  background-color: transparent !important;
  color: var(--choco) !important;
  border: 1px solid color-mix(in srgb, var(--choco) 55%, transparent) !important;
}
.btn-outline-choco:hover,
.btn-outline-choco:focus {
  background-color: color-mix(in srgb, var(--choco) 12%, transparent) !important;
  color: var(--section-title) !important;
  border-color: color-mix(in srgb, var(--choco) 70%, transparent) !important;
  box-shadow: var(--ring) !important;
}
/* Indicadores del carrusel con color de marca */
.carousel-indicators [data-bs-target] {
  background-color: color-mix(in srgb, var(--choco) 70%, white);
}
.carousel-indicators .active {
  background-color: var(--choco);
}

/* Mayor contraste de los íconos prev/next en ambos temas */
.carousel-control-prev-icon,
.carousel-control-next-icon {
  filter: drop-shadow(0 2px 4px rgba(0,0,0,.35));
}
:root[data-theme='dark'] .carousel-control-prev-icon,
:root[data-bs-theme='dark'] .carousel-control-prev-icon,
:root[data-theme='dark'] .carousel-control-next-icon,
:root[data-bs-theme='dark'] .carousel-control-next-icon {
  filter: invert(.85) drop-shadow(0 2px 4px rgba(0,0,0,.55));
}
/* ===== Timeline (Nosotros) ===== */
.timeline {
  list-style: none;
  position: relative;
  padding-left: 1.5rem;
  margin: 0;
}
.timeline::before {
  content: "";
  position: absolute;
  left: 0.55rem;
  top: 0.25rem;
  bottom: 0.25rem;
  width: 2px;
  background: var(--border);
}
.timeline li {
  position: relative;
  margin-bottom: 1rem;
}
.timeline-dot {
  position: absolute;
  left: 0.2rem;
  top: 0.35rem;
  width: 0.75rem;
  height: 0.75rem;
  background: var(--choco);
  border-radius: 50%;
  box-shadow: var(--shadow);
}
.timeline-content {
  margin-left: 1rem;
}

/* ===== Value cards (Nosotros) ===== */
.value-card {
  background-color: var(--surface-1);
  border-color: var(--border) !important;
  transition: transform .15s ease, box-shadow .15s ease;
}
.value-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 18px rgba(0,0,0,.08);
}
/* Compacta la navbar */
.navbar .navbar-brand img { height: 36px; width: auto; }
.navbar .navbar-brand .brand-font { line-height: 1; }

/* Input-group chico en navbar */
.navbar .input-group-sm .form-control,
.navbar .input-group-sm .btn { border-radius: .6rem !important; }

/* Botones de la navbar con altura amable */
.navbar .btn,
.navbar .form-control { padding-top: .35rem; padding-bottom: .35rem; }
/* Footer links más suaves */
footer .link-secondary { opacity: .85; transition: opacity .2s; }
footer .link-secondary:hover { opacity: 1; }
/* Transiciones suaves para cambio de tema */
* {
  transition: background-color .25s ease, color .25s ease, border-color .25s ease;
}

/* Cuando estamos animando el cambio de tema, alarga y suma fill/stroke (SVG, iconos) */
.theme-animating * {
  transition: background-color .45s ease, color .45s ease, border-color .45s ease,
              box-shadow .45s ease, fill .45s ease, stroke .45s ease !important;
}

/* Respeto a usuarios que prefieren menos movimiento */
@media (prefers-reduced-motion: reduce) {
  *, .theme-animating * { transition: none !important; }
}
/* === Transición de tema (fade-out / fade-in controlado) === */
.theme-animating body {
  transition: opacity .35s ease, filter .35s ease;
  opacity: .55;              /* baja un poco la opacidad */
  filter: saturate(.9);      /* toque suave para que no sea un “apagón” */
}

/* Asegura que también transicionen los colores cuando hay animación */
.theme-animating * {
  transition: background-color .45s ease, color .45s ease,
              border-color .45s ease, box-shadow .45s ease !important;
}

/* Respeto por reduce-motion */
@media (prefers-reduced-motion: reduce) {
  .theme-animating body,
  .theme-animating * { transition: none !important; }
}
/* === Transición de tema: fade del body === */
body.theme-animating {
  transition: opacity .35s ease, filter .35s ease;
  opacity: .55;           /* leve atenuación */
  filter: saturate(.9);   /* sin “apagón” brusco */
}

/* Mientras anima, suaviza cambios de los demás colores/bordes */
body.theme-animating *, html.theme-animating * {
  transition: background-color .45s ease, color .45s ease,
              border-color .45s ease, box-shadow .45s ease !important;
}

/* Respeto por reduce motion */
@media (prefers-reduced-motion: reduce) {
  body.theme-animating,
  body.theme-animating *, html.theme-animating * { transition: none !important; }
}
/* === Telón de transición de tema === */
#theme-curtain {
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  transition: opacity .32s ease, backdrop-filter .32s ease;
  /* capa sutil que no “apaga” la pantalla: */
  background: radial-gradient(120% 120% at 50% 50%, rgba(0,0,0,.06), rgba(0,0,0,.12));
  backdrop-filter: saturate(0.95) brightness(0.98);
  z-index: 2147483000; /* por encima de todo */
}
#theme-curtain.show {
  opacity: 1;
}

/* Reduce motion: sin animación */
@media (prefers-reduced-motion: reduce) {
  #theme-curtain { transition: none !important; }
}

/* ===== MODOS DE ACCESIBILIDAD ===== */

/* Alto contraste */
:root[data-high-contrast="true"] {
  --bg: #ffffff;
  --text: #000000;
  --muted: #333333;
  --border: #000000;
  --surface-1: #ffffff;
  --surface-2: #f0f0f0;
  --choco: #000000;
  --shadow: 0 4px 12px rgba(0,0,0,.25);
}

:root[data-high-contrast="true"][data-theme="dark"],
:root[data-high-contrast="true"][data-bs-theme="dark"] {
  --bg: #000000;
  --text: #ffffff;
  --muted: #cccccc;
  --border: #ffffff;
  --surface-1: #000000;
  --surface-2: #1a1a1a;
  --choco: #ffffff;
  --shadow: 0 4px 12px rgba(255,255,255,.25);
}

/* Texto grande */
:root[data-large-text="true"] {
  font-size: 18px;
}

:root[data-large-text="true"] h1 {
  font-size: 3rem;
}

:root[data-large-text="true"] h2 {
  font-size: 2.5rem;
}

:root[data-large-text="true"] h3 {
  font-size: 2rem;
}

:root[data-large-text="true"] .btn {
  font-size: 1.1rem;
  padding: 0.6rem 1.5rem;
}

:root[data-large-text="true"] .card {
  font-size: 1.1rem;
}

/* Movimiento reducido */
:root[data-reduced-motion="true"] *,
:root[data-reduced-motion="true"] *::before,
:root[data-reduced-motion="true"] *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

/* Indicadores de foco mejorados */
:root[data-focus-indicators="true"] *:focus-visible {
  outline: 3px solid var(--choco) !important;
  outline-offset: 4px !important;
  box-shadow: 0 0 0 4px rgba(90, 44, 30, 0.2) !important;
}

:root[data-focus-indicators="true"][data-theme="dark"] *:focus-visible,
:root[data-focus-indicators="true"][data-bs-theme="dark"] *:focus-visible {
  outline-color: var(--choco) !important;
  box-shadow: 0 0 0 4px rgba(240, 197, 171, 0.3) !important;
}

/* Mejora de contraste en links */
:root[data-high-contrast="true"] a {
  text-decoration: underline;
  font-weight: 600;
}

/* Bordes más visibles en alto contraste */
:root[data-high-contrast="true"] .card,
:root[data-high-contrast="true"] .btn,
:root[data-high-contrast="true"] .form-control {
  border: 2px solid var(--border) !important;
}
